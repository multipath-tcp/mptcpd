<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mptcpd: include/mptcpd/private/network_monitor.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mptcpd
   </div>
   <div id="projectbrief">Multipath TCP Daemon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_dec65444e04ab4c792a063ebee1089f0.html">mptcpd</a></li><li class="navelem"><a class="el" href="dir_aaf5388191da08faa5411aaf9dc4ef2b.html">private</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">network_monitor.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>mptcpd network device monitoring - internal API.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="export_8h_source.html">mptcpd/export.h</a>&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for network_monitor.h:</div>
<div class="dyncontent">
<div class="center"><img src="private_2network__monitor_8h__incl.png" border="0" usemap="#ainclude_2mptcpd_2private_2network__monitor_8h" alt=""/></div>
<map name="ainclude_2mptcpd_2private_2network__monitor_8h" id="ainclude_2mptcpd_2private_2network__monitor_8h">
<area shape="rect" title="mptcpd network device monitoring &#45; internal API." alt="" coords="45,5,217,47"/>
<area shape="rect" href="export_8h.html" title="mptcpd shared library symbol export/import macros." alt="" coords="5,95,135,121"/>
<area shape="rect" title=" " alt="" coords="159,95,229,121"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="private_2network__monitor_8h__dep__incl.png" border="0" usemap="#ainclude_2mptcpd_2private_2network__monitor_8hdep" alt=""/></div>
<map name="ainclude_2mptcpd_2private_2network__monitor_8hdep" id="ainclude_2mptcpd_2private_2network__monitor_8hdep">
<area shape="rect" title="mptcpd network device monitoring &#45; internal API." alt="" coords="177,5,349,47"/>
<area shape="rect" href="network__monitor_8c.html" title="mptcpd network device monitoring." alt="" coords="5,95,168,121"/>
<area shape="rect" href="configuration_8c.html" title="Mptcpd configuration parser implementation." alt="" coords="192,95,333,121"/>
<area shape="rect" href="src_2path__manager_8c.html" title="mptcpd path manager framework." alt="" coords="357,95,507,121"/>
</map>
</div>
</div>
<p><a href="private_2network__monitor_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Mptcpd Network Monitor Flags</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Flags controlling address notification in the mptcpd network monitor. Pass to <code><a class="el" href="private_2network__monitor_8h.html#a5396fa749c0d6e207e69daf8bb097d2c" title="Create a network monitor.">mptcpd_nm_create()</a></code>. </p>
</div></td></tr>
<tr class="memitem:a6e6265f028a2c24d7b534470d708264d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#a6e6265f028a2c24d7b534470d708264d">MPTCPD_NOTIFY_FLAG_EXISTING</a>&#160;&#160;&#160;(1U &lt;&lt; 0)</td></tr>
<tr class="separator:a6e6265f028a2c24d7b534470d708264d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5c322f5ee6109505f81b48b1bd53dc1"><td class="memItemLeft" align="right" valign="top"><a id="ad5c322f5ee6109505f81b48b1bd53dc1"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#ad5c322f5ee6109505f81b48b1bd53dc1">MPTCPD_NOTIFY_FLAG_SKIP_LL</a>&#160;&#160;&#160;(1U &lt;&lt; 1)</td></tr>
<tr class="memdesc:ad5c322f5ee6109505f81b48b1bd53dc1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore link-local addresses. <br /></td></tr>
<tr class="separator:ad5c322f5ee6109505f81b48b1bd53dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5f549264418f20feeae1ebc1bf84942"><td class="memItemLeft" align="right" valign="top"><a id="aa5f549264418f20feeae1ebc1bf84942"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#aa5f549264418f20feeae1ebc1bf84942">MPTCPD_NOTIFY_FLAG_SKIP_HOST</a>&#160;&#160;&#160;(1U &lt;&lt; 2)</td></tr>
<tr class="memdesc:aa5f549264418f20feeae1ebc1bf84942"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore host (loopback) addresses. <br /></td></tr>
<tr class="separator:aa5f549264418f20feeae1ebc1bf84942"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb011b3a7e1aa7c03f8226b451aee23a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#adb011b3a7e1aa7c03f8226b451aee23a">MPTCPD_NOTIFY_FLAG_ROUTE_CHECK</a>&#160;&#160;&#160;(1U &lt;&lt; 3)</td></tr>
<tr class="separator:adb011b3a7e1aa7c03f8226b451aee23a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5396fa749c0d6e207e69daf8bb097d2c"><td class="memItemLeft" align="right" valign="top">MPTCPD_API struct <a class="el" href="structmptcpd__nm.html">mptcpd_nm</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#a5396fa749c0d6e207e69daf8bb097d2c">mptcpd_nm_create</a> (uint32_t flags)</td></tr>
<tr class="memdesc:a5396fa749c0d6e207e69daf8bb097d2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a network monitor.  <a href="private_2network__monitor_8h.html#a5396fa749c0d6e207e69daf8bb097d2c">More...</a><br /></td></tr>
<tr class="separator:a5396fa749c0d6e207e69daf8bb097d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76da7206668ad9784530c5284a6262d8"><td class="memItemLeft" align="right" valign="top">MPTCPD_API void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="private_2network__monitor_8h.html#a76da7206668ad9784530c5284a6262d8">mptcpd_nm_destroy</a> (struct <a class="el" href="structmptcpd__nm.html">mptcpd_nm</a> *nm)</td></tr>
<tr class="memdesc:a76da7206668ad9784530c5284a6262d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a network monitor.  <a href="private_2network__monitor_8h.html#a76da7206668ad9784530c5284a6262d8">More...</a><br /></td></tr>
<tr class="separator:a76da7206668ad9784530c5284a6262d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>mptcpd network device monitoring - internal API. </p>
<p>Copyright (c) 2017-2022, Intel Corporation </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6e6265f028a2c24d7b534470d708264d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e6265f028a2c24d7b534470d708264d">&#9670;&nbsp;</a></span>MPTCPD_NOTIFY_FLAG_EXISTING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPTCPD_NOTIFY_FLAG_EXISTING&#160;&#160;&#160;(1U &lt;&lt; 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notify even the addresses already existing at startup-time. </p>

</div>
</div>
<a id="adb011b3a7e1aa7c03f8226b451aee23a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb011b3a7e1aa7c03f8226b451aee23a">&#9670;&nbsp;</a></span>MPTCPD_NOTIFY_FLAG_ROUTE_CHECK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MPTCPD_NOTIFY_FLAG_ROUTE_CHECK&#160;&#160;&#160;(1U &lt;&lt; 3)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Notify address only if a default route is available from the given interface. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5396fa749c0d6e207e69daf8bb097d2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5396fa749c0d6e207e69daf8bb097d2c">&#9670;&nbsp;</a></span>mptcpd_nm_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MPTCPD_API struct <a class="el" href="structmptcpd__nm.html">mptcpd_nm</a>* mptcpd_nm_create </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a network monitor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>Flags controlling address notification, any of: MPTCPD_NOTIFY_FLAG_EXISTING, MPTCPD_NOTIFY_FLAG_SKIP_LL, MPTCPD_NOTIFY_FLAG_SKIP_HOST</td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>As currently implemented, one could create multiple network monitors. Is that useful?</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to new network monitor on success. <code>NULL</code> on failure. </dd></dl>
<p>Get network interface information.</p>
<dl class="section note"><dt>Note</dt><dd>We force the second rtnetlink command, RTM_GETADDR, to be sent after this one completes by doing so in the destroy callback for this command. That guarantees that the potential multipart message response from this dump is fully read prior to sending the second command. This works around an issue in ELL where it was possible that the second command would be sent prior to receiving all of the parts of the multipart <code>RTM_GETLINK</code> response, which resulted in an EBUSY error.</dd></dl>

</div>
</div>
<a id="a76da7206668ad9784530c5284a6262d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76da7206668ad9784530c5284a6262d8">&#9670;&nbsp;</a></span>mptcpd_nm_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MPTCPD_API void mptcpd_nm_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structmptcpd__nm.html">mptcpd_nm</a> *&#160;</td>
          <td class="paramname"><em>nm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy a network monitor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">nm</td><td>Network monitor to be destroyed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
