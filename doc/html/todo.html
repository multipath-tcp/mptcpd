<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>mptcpd: Todo List</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">mptcpd
   </div>
   <div id="projectbrief">Multipath TCP Daemon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Todo List </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="reflist">
</dl>
<p><a class="anchor" id="_todo000034"></a>Verify that this payload size calculation is correct. The alignment, in particular, doesn't look quite right.  </p>
<p>Member <a class="el" href="plugin_8c.html#a623c826701cad3907c48f56cedb9730b">mptcpd_plugin_load</a>  (char const *dir, char const *default_name, struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm) <a class="anchor" id="_todo000024"></a>Determine if this is a performance bottleneck on 64 bit platforms since it is possible that connection IDs may end up in the same hash bucket due to the truncation from 64 bits to 32 bits in ELL's direct hash function, assuming <code>unsigned</code> <code>int</code> is a 32 bit type.  </p>
<p>Member <a class="el" href="plugin_8c.html#a04d5b40d21e262c386b4f3db0dd1ba62">mptcpd_plugin_register_ops</a>  (char const *name, struct <a class="el" href="structmptcpd__plugin__ops.html" title="Mptcpd plugin interface.">mptcpd_plugin_ops</a> const *ops) <a class="anchor" id="_todo000025"></a>Should we return <code>false</code> if all of the callbacks in <em>ops</em> are <code>NULL</code>?  </p>
<p>"  <a class="anchor" id="_todo000026"></a>Is memcmp() suitable in this case? Do we need to worry about the existence of uninitialized bytes in the IPv6 address byte array. </p>
<p><a class="anchor" id="_todo000027"></a>This iterates through the network interface list mantained by the mptcpd network monitor to find the network interface index that matches the given local address <em>addr</em>. This could become very inefficient in the presence of a large number of network interfaces on a given platform. Leveraging network monitor event notifications should help alleviate this issue. </p>
<p><a class="anchor" id="_todo000028"></a>Implement this function. </p>
<p><a class="anchor" id="_todo000029"></a>Should we check for configuration files in <code>~/</code>.config, <code>$XDG_CONFIG_DIRS</code> and <code>$XDG_CONFIG_HOME</code>? Considering that mptcpd is meant to run as a privileged process that may not be a good idea.  </p>
<p>Member <a class="el" href="mptcpd_8c.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>  (int argc, char *argv[]) <a class="anchor" id="_todo000030"></a>Start D-Bus once we support a mptcpd D-Bus API.</p>
<p><a class="anchor" id="_todo000031"></a>Make this daemon socket-activatable when using systemd.</p>
<p><a class="anchor" id="_todo000032"></a>Should we daemonize the the mptcpd process the canonical way - fork() then orphan to make it owned by the 'init' process, among other steps - when systemd isn't used? </p>
<p><a class="anchor" id="_todo000033"></a>Call <code>mptcpd_config_free()</code> as soon we're done with reading the configuration, e.g. after the path manager has been initialized.  </p>
<p>"  <a class="anchor" id="_todo000023"></a>Should a readdir() error from above be considered fatal? </p>
<p><a class="anchor" id="_todo000035"></a>Verify that this payload size calculation is correct. The alignment, in particular, doesn't look quite right. </p>
<p><a class="anchor" id="_todo000036"></a>Verify that this payload size calculation is correct. The alignment, in particular, doesn't look quite right. </p>
<p><a class="anchor" id="_todo000037"></a>Verify that this payload size calculation is correct. The alignment, in particular, doesn't look quite right. </p>
<p><a class="anchor" id="_todo000038"></a>Should we verify that the local and remote address families match? The kernel already does that, but we currently don't propagate any kernel initiated errors to the caller. </p>
<p><a class="anchor" id="_todo000039"></a>Verify that this payload size calculation is correct. The alignment, in particular, doesn't look quite right. </p>
<p><a class="anchor" id="_todo000040"></a>Should we verify that the local and remote address families match? The kernel already does that, but we currently don't propagate any kernel initiated errors to the caller. </p>
<p><a class="anchor" id="_todo000041"></a>The user would have to perform a similar cast when retrieving the <code>sockaddr</code>. Perhaps we should export a new set of <code>mptcpd_addr_info_get_foo()</code> functions for each of the <code><a class="el" href="structmptcpd__addr__info.html" title="Information associated with a network address.">mptcpd_addr_info</a></code> fields. </p>
<p><a class="anchor" id="_todo000042"></a>Should we exit with an error instead? </p>
<p><a class="anchor" id="_todo000043"></a>Register a callback once the kernel MPTCP path management generic netlink API supports new/removed address notifications so that the mptcpd ID manager state can be synchronized with the kernel dynamically.  </p>
<p>Member <a class="el" href="src_2path__manager_8c.html#a23c9dc1e9f8f202101bd14c1e120565d">mptcpd_pm_create</a>  (struct <a class="el" href="structmptcpd__config.html" title="mptcpd configuration parameters">mptcpd_config</a> const *config) <a class="anchor" id="_todo000044"></a>As currently implemented, one could create multiple path manager instances? Is that useful? </p>
<p><a class="el" href="structmptcpd__idm.html">mptcpd_idm</a> Member <a class="el" href="structmptcpd__idm.html#a001fb1299be67c14cc358b4192ad3362">mptcpd_idm::map</a>   <a class="anchor" id="_todo000012"></a>A hashmap may be overkill for this use case since a given host isn't likely to have many local IP addresses. Assuming that is the case, a simple O(n) based lookup on a linked list (e.g. <code>l_queue</code>) or an array should perform just as well.  </p>
<p>Member <a class="el" href="network__monitor_8c.html#a9d049c96f8d13bb250a18775480e54e9">mptcpd_nm_create</a>  (void) <a class="anchor" id="_todo000002"></a>As currently implemented, one could create multiple network monitors. Is that useful? </p>
<p>Member <a class="el" href="lib_2path__manager_8c.html#a7c79f61d64969af6408916babef45805">mptcpd_pm_add_addr</a>  (struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm, struct sockaddr const *addr, mptcpd_aid_t address_id, uint32_t flags, int index, mptcpd_token_t token) <a class="anchor" id="_todo000003"></a>Should we define corresponding mptcpd flags instead of exposing the flags in &lt;linux/mptcp.h&gt;? </p>
<p>Member <a class="el" href="lib_2path__manager_8c.html#aca2baa805864131ab8a75a371eecd999">mptcpd_pm_flush_addrs</a>  (struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm) <a class="anchor" id="_todo000004"></a>Improve documentation. </p>
<p>Member <a class="el" href="lib_2path__manager_8c.html#a3b8783192848743adb90b2a3cd573e10">mptcpd_pm_add_subflow</a>  (struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm, mptcpd_token_t token, mptcpd_aid_t local_address_id, mptcpd_aid_t remote_address_id, struct sockaddr const *local_addr, struct sockaddr const *remote_addr, bool backup) <a class="anchor" id="_todo000005"></a>There far too many parameters. Reduce.  </p>
<p><a class="el" href="structmptcpd__pm__cmd__ops.html" title="MPTCP path management generic netlink command functions.">mptcpd_pm_cmd_ops</a> Module <a class="el" href="structmptcpd__pm__cmd__ops.html#amgrp5bad0ea63fc9a13765b39c01dbab861d">Common Path Management Commands</a>   <a class="anchor" id="_todo000006"></a>Consider splitting these commands into server-oriented and client-oriented cases. There shouldn't be any overlap between these use cases.  </p>
<p><a class="el" href="structmptcpd__pm__cmd__ops.html" title="MPTCP path management generic netlink command functions.">mptcpd_pm_cmd_ops</a> Member <a class="el" href="structmptcpd__pm__cmd__ops.html#adbc55d99918feb55ffef8e24e5af751f">mptcpd_pm_cmd_ops::flush_addrs</a>  )(struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm) <a class="anchor" id="_todo000007"></a>Improve documentation. </p>
<p><a class="el" href="structmptcpd__pm__cmd__ops.html" title="MPTCP path management generic netlink command functions.">mptcpd_pm_cmd_ops</a> Member <a class="el" href="structmptcpd__pm__cmd__ops.html#a6368e402765f94ea505fd51a8209b5bd">mptcpd_pm_cmd_ops::add_subflow</a>  )(struct <a class="el" href="structmptcpd__pm.html" title="Data needed to run the path manager.">mptcpd_pm</a> *pm, mptcpd_token_t token, mptcpd_aid_t local_address_id, mptcpd_aid_t remote_address_id, struct sockaddr const *local_addr, struct sockaddr const *remote_addr, bool backup) <a class="anchor" id="_todo000008"></a>There far too many parameters. Reduce.  </p>
<p>Member <a class="el" href="types_8h.html#a6e9641b2e99dcb57c5815a84af404700">mptcpd_token_t</a>   <a class="anchor" id="_todo000009"></a>These rely on MPTCP genl related implementation details in the kernel. Should we move these typedefs to <code>&lt;linux/mptcp.h&gt;</code>, e.g. 'typedef uint32_t mptcp_token_t'?  </p>
<p>"  <a class="anchor" id="_todo000010"></a>This hash function is rather trivial. If collisions end up being a concern we may want to look into a better hash algorithm, such as MurmurHash. </p>
<p><a class="anchor" id="_todo000011"></a>This hash function is rather trivial. If collisions end up being a concern we may want to look into a better hash algorithm, such as MurmurHash.  </p>
<p><a class="el" href="structmptcpd__addr__info.html" title="Information associated with a network address.">mptcpd_addr_info</a> Member <a class="el" href="structmptcpd__addr__info.html#a15d6781dd09910a1d56915fe57b2f6f8">mptcpd_addr_info::index</a>   <a class="anchor" id="_todo000001"></a>Will this value ever be zero, i.e. not set?  </p>
<p>"  <a class="anchor" id="_todo000013"></a>Is memcmp() suitable in this case? Do we need to worry about the existence of uninitialized bytes in the IPv6 address byte array. </p>
<p><a class="anchor" id="_todo000014"></a>Can we retrieve the IP address associated with each network interface from IFLA_* attributes? It seemed like we could potentially pull them from the IFLA_AF_SPEC nested attribute but that attribute appears to only contain configuration information exposed through the sysctl interface. We may be stuck retrieving interfaces through the RTM_GETADDR rtnetlink message.</p>
<p><a class="anchor" id="_todo000015"></a>Add support for filtering networking interfaces based on whether or not they have been marked MPTCP-enabled through an mptcpd configuration/setting. </p>
<p><a class="anchor" id="_todo000016"></a>Will we actually care about updating information related to an existing network address? We only track the address itself rather than other fields in the <code>ifaddrmsg</code> structure (flags, etc). </p>
<p><a class="anchor" id="_todo000017"></a>The below debug log message assumes that only AF_INET and AF_INET6 families are supported by RTM_GETADDR. While that is true at the moment, it may change in the future. </p>
<p><a class="anchor" id="_todo000018"></a>There is nothing Netlink specific about this function. Should it be made available to the rest of mptcpd as a utility function?  </p>
<p>Member <a class="el" href="plugin_8c.html#a985ec6b7afa5f46ad0e5533d62f7873b">MPTCP_PM_NAME_LEN</a>   <a class="anchor" id="_todo000019"></a>Remove this preprocessor symbol definition once support for path management strategy names are supported in the new generic netlink API. </p>
<p>"  <a class="anchor" id="_todo000020"></a>Consider merging this map the <code>plugin_infos</code> queue. </p>
<p><a class="anchor" id="_todo000021"></a>Determine if use of a hashmap scales well, in terms of both performance and resource usage, in the presence of a large number of MPTCP connections. </p>
<p><a class="anchor" id="_todo000022"></a>Should we reject a zero valued token? </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Apr 13 2021 13:15:39 for mptcpd by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.18
</small></address>
</body>
</html>
